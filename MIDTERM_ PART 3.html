<!DOCTYPE html>
<!-- saved from url=(0144)https://a9957-22974013.cluster61.canvas-user-content.com/files/9957~22974013/download?inline=1&verifier=aQLggJvccSJr0E4DGmYOGH9ZewMjr40cZ64pUmTM -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>MIDTERM: PART 3</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">

    <link rel="stylesheet" href="./MIDTERM_ PART 3_files/leaflet.css" integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin="">
<script src="./MIDTERM_ PART 3_files/leaflet.js.download" integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>

    <style>
        body {
            margin: 0;
            padding: 0;
            background: whitesmoke;
            font-family: Lato, sans-serif;
            color: #0D0000;
        }
        header {
            padding: 6px 10%;
        }
        h1 {
            display: inline-block;
            margin-right: 20px;
            color: #093d67;
        }
        h2 {
            display: inline-block;
            color: #074a81;
        }
        #map {
            width: 80%;
            height: 540px;
            margin: 10px auto;
        }
        footer {
            padding: 6px 10%;
            width: 80%;
            font-size: 1em;
            color: #083153;
            background-color: bisque;
        }
        
    </style>
</head>

<body>
    <header>
        <h1>Challenge 1B</h1>
        <h2>Calculate the distance and the remain fuel</h2>
    </header>

    <div id="map" class="leaflet-container leaflet-touch leaflet-retina leaflet-fade-anim leaflet-grab leaflet-touch-drag leaflet-touch-zoom" tabindex="0" style="position: relative; outline: none;"><div class="leaflet-pane leaflet-map-pane" style="transform: translate3d(0px, 0px, 0px);"><div class="leaflet-pane leaflet-tile-pane"><div class="leaflet-layer " style="z-index: 1; opacity: 1;"><div class="leaflet-tile-container leaflet-zoom-animated" style="z-index: 18; transform: translate3d(0px, 0px, 0px) scale(1);"><img alt="" src="./MIDTERM_ PART 3_files/2" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(370px, 181px, 0px); opacity: 1;"><img alt="" src="./MIDTERM_ PART 3_files/2(1)" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(370px, -75px, 0px); opacity: 1;"><img alt="" src="./MIDTERM_ PART 3_files/1" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(114px, 181px, 0px); opacity: 1;"><img alt="" src="./MIDTERM_ PART 3_files/3" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(626px, 181px, 0px); opacity: 1;"><img alt="" src="./MIDTERM_ PART 3_files/2(2)" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(370px, 437px, 0px); opacity: 1;"><img alt="" src="./MIDTERM_ PART 3_files/1(1)" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(114px, -75px, 0px); opacity: 1;"><img alt="" src="./MIDTERM_ PART 3_files/3(1)" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(626px, -75px, 0px); opacity: 1;"><img alt="" src="./MIDTERM_ PART 3_files/1(2)" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(114px, 437px, 0px); opacity: 1;"><img alt="" src="./MIDTERM_ PART 3_files/3(2)" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(626px, 437px, 0px); opacity: 1;"><img alt="" src="./MIDTERM_ PART 3_files/0" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-142px, 181px, 0px); opacity: 1;"><img alt="" src="./MIDTERM_ PART 3_files/0" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(882px, 181px, 0px); opacity: 1;"><img alt="" src="./MIDTERM_ PART 3_files/0(1)" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-142px, -75px, 0px); opacity: 1;"><img alt="" src="./MIDTERM_ PART 3_files/0(1)" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(882px, -75px, 0px); opacity: 1;"><img alt="" src="./MIDTERM_ PART 3_files/0(2)" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-142px, 437px, 0px); opacity: 1;"><img alt="" src="./MIDTERM_ PART 3_files/0(2)" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(882px, 437px, 0px); opacity: 1;"></div></div></div><div class="leaflet-pane leaflet-overlay-pane"></div><div class="leaflet-pane leaflet-shadow-pane"><img src="./MIDTERM_ PART 3_files/marker-shadow.png" class="leaflet-marker-shadow leaflet-zoom-animated" alt="" style="margin-left: -12px; margin-top: -41px; width: 41px; height: 41px; transform: translate3d(156px, 313px, 0px);"><img src="./MIDTERM_ PART 3_files/marker-shadow.png" class="leaflet-marker-shadow leaflet-zoom-animated" alt="" style="margin-left: -12px; margin-top: -41px; width: 41px; height: 41px; transform: translate3d(716px, 363px, 0px);"><img src="./MIDTERM_ PART 3_files/marker-shadow.png" class="leaflet-marker-shadow leaflet-zoom-animated" alt="" style="margin-left: -12px; margin-top: -41px; width: 41px; height: 41px; transform: translate3d(144px, 299px, 0px);"><img src="./MIDTERM_ PART 3_files/marker-shadow.png" class="leaflet-marker-shadow leaflet-zoom-animated" alt="" style="margin-left: -12px; margin-top: -41px; width: 41px; height: 41px; transform: translate3d(457px, 270px, 0px);"></div><div class="leaflet-pane leaflet-marker-pane"><img src="./MIDTERM_ PART 3_files/marker-icon-2x.png" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="Marker" tabindex="0" role="button" style="margin-left: -12px; margin-top: -41px; width: 25px; height: 41px; transform: translate3d(156px, 313px, 0px); z-index: 313;"><img src="./MIDTERM_ PART 3_files/marker-icon-2x.png" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="Marker" tabindex="0" role="button" style="margin-left: -12px; margin-top: -41px; width: 25px; height: 41px; transform: translate3d(716px, 363px, 0px); z-index: 363;"><img src="./MIDTERM_ PART 3_files/marker-icon-2x.png" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="Marker" tabindex="0" role="button" style="margin-left: -12px; margin-top: -41px; width: 25px; height: 41px; transform: translate3d(144px, 299px, 0px); z-index: 299;"><img src="./MIDTERM_ PART 3_files/marker-icon-2x.png" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="Marker" tabindex="0" role="button" style="margin-left: -12px; margin-top: -41px; width: 25px; height: 41px; transform: translate3d(457px, 270px, 0px); z-index: 270;"></div><div class="leaflet-pane leaflet-tooltip-pane"></div><div class="leaflet-pane leaflet-popup-pane"></div><div class="leaflet-proxy leaflet-zoom-animated" style="transform: translate3d(598.5px, 345px, 0px) scale(2);"></div></div><div class="leaflet-control-container"><div class="leaflet-top leaflet-left"><div class="leaflet-control-zoom leaflet-bar leaflet-control"><a class="leaflet-control-zoom-in" href="https://a9957-22974013.cluster61.canvas-user-content.com/files/9957~22974013/download?inline=1&amp;verifier=aQLggJvccSJr0E4DGmYOGH9ZewMjr40cZ64pUmTM#" title="Zoom in" role="button" aria-label="Zoom in" aria-disabled="false"><span aria-hidden="true">+</span></a><a class="leaflet-control-zoom-out" href="https://a9957-22974013.cluster61.canvas-user-content.com/files/9957~22974013/download?inline=1&amp;verifier=aQLggJvccSJr0E4DGmYOGH9ZewMjr40cZ64pUmTM#" title="Zoom out" role="button" aria-label="Zoom out" aria-disabled="false"><span aria-hidden="true">−</span></a></div></div><div class="leaflet-top leaflet-right"></div><div class="leaflet-bottom leaflet-left"></div><div class="leaflet-bottom leaflet-right"><div class="leaflet-control-attribution leaflet-control"><a href="https://leafletjs.com/" title="A JavaScript library for interactive maps"><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"></path><path fill="#FFD500" d="M0 4h12v3H0z"></path><path fill="#E0BC00" d="M0 7h12v1H0z"></path></svg> Leaflet</a> <span aria-hidden="true">|</span> Map tiles by <a href="http://stamen.com/">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> — Map data © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a></div></div></div></div>
    
    <footer>
        <p>Map authored by Peter</p>
        <p>Calculate the distance and the remain fuel from Taipei, Kyiv and Toronto to Philadelphia.</p>
    </footer>

<script>
    
    
    var options = {
            center: [50.451300464115036,30.520834702927402],
            zoom: 2
    }
    
    var map = L.map('map', options);
        
    var tiles =  L.tileLayer('http://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
	subdomains: 'abcd',
	minZoom: 0,
	maxZoom: 18,
});
    map.addLayer(tiles);
    
    
    //  CHECKING THE FUEL TANK WHEN YOU LAND IN PHILLY 
    
    // THE OBJECT OF THE ASSIGNMENT IS TO CREATE A POPUP THAT HAS THE FOLLOWING INFORMATION FOR 3 CITIES WITH FLIGHTS THAT HAVE DEPARTED FOR PHILADELPHIA 
    // 1. The popup should have the name of the city the plane is departing from en route to Philadelphia (use a for loop for the names in the popup - very similar to what we have done) If you want to - you can include Philadelphia on the map
    var philly = "Philadelphia"
    var phillyCoord = [39.93891753598476,-75.20008867648731]
    var phillyMarkers = L.marker(phillyCoord).addTo(map).bindPopup(philly);
    
    //*** create lat lon objects for each city and save each to a variable
    //*** create three new variables for each of these cities and send each lat lng object down to a caller to calculate the distance
    //***the function should be distanceTo Philly and then return
    //***Now that the callers have distances in miles you will create new variables for the fule part (one for each city) and send them down into a function   var fuelTank = (1-(distance* 12/100000)) *100 return the values
    // *** set up the distances, fuel variables, names, and coordinates in arrays
    //*** use the for loop - inside the for look two options if (fuel <75) refill else don't re fill

    // 2. The Popup should have the distance traveled from the origin city to Philadelphia (Using L.latLng objects and the distance.To method you create 3 seperate callers sending each city's L.latLng object into a function ultimately returning distance (make sure to convert from meters (the default) to KM and also use the Math.round() method (used in part 2) to make it look nice - once you have returned these distance values to callers represented by variables, you will put these variables in an array and use the looped version of them in the popup) See code above for an example of L.latLng and .distanceTo
    
    // 3. The Popup should have the percentage of the fuel tank that is remaining once the plane lands in Philadelphia. You will create a function caller and send the looped version of the distance array (in km) to a function, which will return a looped version of how full the tank is as a percentage.

    // 4. The Popup should indicate if the tank that needs to be refilled - write a an if and else statement - if the fuel level is under 75 percent it should be refilled. If the popup indicates the plane needs to be refilled change the font/color to signal it's importance.
    // Constants
const FULL_TANK_CAPACITY = 100000;
const FUEL_BURN_RATE = 12;

// City data
const cities = [
  { name: 'Taipei', latLng: L.latLng(25.0481671,121.5583578) },
  { name: 'Toronto', latLng: L.latLng(43.6678992792755,-79.39554642059856) },
  { name: 'Kyiv', latLng: L.latLng(50.451300464115036,30.520834702927402) }
];

// Function to calculate distance between two latLng objects in km
function calculateDistance(from, to) {
  const distanceInMeters = from.distanceTo(to);
  const distanceInKm = distanceInMeters / 1000;
  return Math.round(distanceInKm);
}

// Function to calculate remaining fuel percentage after a trip of a given distance
function calculateRemainingFuel(distance) {
  const fuelTank = (1 - (distance * FUEL_BURN_RATE / FULL_TANK_CAPACITY)) * 100;
  return Math.round(fuelTank);
}

// Loop through cities and create markers with popups
cities.forEach(city => {
  const distanceToPhilly = calculateDistance(city.latLng, phillyCoord);
  const remainingFuelPercentage = calculateRemainingFuel(distanceToPhilly);
  const popupContent = `
    <h3>${city.name} to Philadelphia</h3>
    <p>Distance: ${distanceToPhilly} km</p>
    <p>Fuel Remaining: ${remainingFuelPercentage}%</p>
  `;
  const marker = L.marker(city.latLng).addTo(map);
  marker.bindPopup(popupContent);
  if (remainingFuelPercentage < 75) {
    marker._popup.setContent(`<span style="color:red; font-weight:bold;">${popupContent}</span>`);
  }
});


    //Constants you should know / conventions to follow
    // A 747 plane (we are assuming you are flying a 747) burns 12 liters of gas per KM 
    // A L.latLng object will not work inside L.Marker to plot your points but it is necessary to use distance.To
    // Distance from distance.To is in Meters - you should convert it to KM 
    // A fulltank of Gas on a 747 varies - for this purpose I put it as 100,000 - if you wish to increase this value if you are working internationally - please do so!!!! 
    
    // Below I will give you some additional instructions about data creation, constants used, and hints for creating your functions 
    
    // HINTS
    
    // Pick 3 cities - Map Them Like We Always do - putting name and coordinate data in arrays - they can be any 3 cities - don't be afraid to recycle from other labs 
 
    // Create 4 L.latLng objects. One for each city. Assign a varaible to each of them. From example: L.latLng(2.34, -5.65) They are similar to coordinates, but cannot be used in L.Marker - but are necessary to calculate distance. They will help us create distance. See the Leaflet API for more details - searh for latLng.  http://leafletjs.com/reference-1.3.0.html
    
    // The variables you create for the 3 cities other than Philadelphia will be sent to a function using seperate callers. 
    // The code for distance looks likes this city1LatLng.distanceTo(city2LatLng) See the Leaflet API and search for distanceTo http://leafletjs.com/reference-1.3.0.html
    // Once you have returned the distance value (in KM) create an array out of the values you used to represent the callers 
    // Plug these values into your popup 
    
    // Use the distances you created in a looped form as a caller (represented by a varaible of course) and send them down to a function that will calculate the precentage of gas left in the tank
    // Assuming that the plane burns 12 liters per KM traveled and has 100,000 capacity - return the value that is left in the tank after the trip to Philadelphia as a percentage. For example... 45 percent of the tank is left. Add it to your pop up.
    
    // Write an if and else statement that affirms or denies the need to fill the tank. Add it to your pop up. 
    // To signal that refilling the tank is important change the font color/type if the tank needs to be refilled (yes or no). 
    


    
</script>
    


</body></html>